schema: '2.0'
stages:
  preprocess:
    cmd: uv run src/preprocessing.py
    deps:
    - path: data/raw/train.csv
      hash: md5
      md5: 2309cc5f04782ed9bb6016d9f4e381cf
      size: 61194
    - path: src/preprocessing.py
      hash: md5
      md5: 8b051fa77ce096304e61bcc450611ffd
      size: 2570
    params:
      params.yaml:
        dataset:
          target_col: Survived
          id_col: PassengerId
          test_size: 0.2
        hyperparameters:
          random_forest:
            n_estimators: 100
            max_depth: 10
            min_samples_split: 2
            min_samples_leaf: 1
            random_state: 42
        names:
          train_data: train.csv
          test_data: test.csv
          val_data: val.csv
          model_name: random_forest
          submission_name: submission.csv
          columns_transformer: columns_transformer
        paths:
          data_parent_dir: data
          models_parent_dir: models
          reports_parent_dir: reports
          figures_parent_dir: figures
          data:
            raw_data: data/raw
            interim_data: data/interim
            processed_data: data/processed
            external_data: data/external
        pipeline_config:
          drop:
          - PassengerId
          - Name
          - Ticket
          - Cabin
          imputation:
            mean:
            - Age
          scaling:
            standard:
            - Age
            - Fare
            minmax:
            - FamilySize
            - TicketGroupSize
          encoding:
            onehot:
            - Sex
            ordinal:
            - Embarked
            - Deck
            - Title
        tuning:
          n_iter: 10
          cv: 5
          random_forest:
            n_estimators:
            - 50
            - 100
            - 200
            max_depth:
            - 5
            - 10
            - 15
            min_samples_split:
            - 2
            - 5
            min_samples_leaf:
            - 1
            - 2
            max_features:
            - sqrt
            - log2
    outs:
    - path: data/interim/train.csv
      hash: md5
      md5: fc65e7a0b204244c9da1f54a36009f05
      size: 79991
    - path: data/interim/val.csv
      hash: md5
      md5: 0c8873598b28b88f77d42e757c4f3918
      size: 20023
    - path: data/processed/train.csv
      hash: md5
      md5: 488b0fd155529107cd5c7c110fbf6836
      size: 61672
    - path: data/processed/val.csv
      hash: md5
      md5: 9c4ec0d759f4bd7989223db07a15d4f3
      size: 15378
    - path: models/random_forest/columns_transformer.pkl
      hash: md5
      md5: 716c7331b2a26f18901f584c816f91f8
      size: 3773
  train:
    cmd: uv run src/train.py
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 488b0fd155529107cd5c7c110fbf6836
      size: 61672
    - path: models/random_forest/columns_transformer.pkl
      hash: md5
      md5: 716c7331b2a26f18901f584c816f91f8
      size: 3773
    - path: src/train.py
      hash: md5
      md5: c23375811bf15e3f9fb1631f96a4b9fd
      size: 2384
    params:
      params.yaml:
        dataset:
          target_col: Survived
          id_col: PassengerId
          test_size: 0.2
        hyperparameters:
          random_forest:
            n_estimators: 100
            max_depth: 10
            min_samples_split: 2
            min_samples_leaf: 1
            random_state: 42
        names:
          train_data: train.csv
          test_data: test.csv
          val_data: val.csv
          model_name: random_forest
          submission_name: submission.csv
          columns_transformer: columns_transformer
        paths:
          data_parent_dir: data
          models_parent_dir: models
          reports_parent_dir: reports
          figures_parent_dir: figures
          data:
            raw_data: data/raw
            interim_data: data/interim
            processed_data: data/processed
            external_data: data/external
        pipeline_config:
          drop:
          - PassengerId
          - Name
          - Ticket
          - Cabin
          imputation:
            mean:
            - Age
          scaling:
            standard:
            - Age
            - Fare
            minmax:
            - FamilySize
            - TicketGroupSize
          encoding:
            onehot:
            - Sex
            ordinal:
            - Embarked
            - Deck
            - Title
        tuning:
          n_iter: 10
          cv: 5
          random_forest:
            n_estimators:
            - 50
            - 100
            - 200
            max_depth:
            - 5
            - 10
            - 15
            min_samples_split:
            - 2
            - 5
            min_samples_leaf:
            - 1
            - 2
            max_features:
            - sqrt
            - log2
    outs:
    - path: models/random_forest/random_forest.pkl
      hash: md5
      md5: 778e7877c6a63591f7c8dc68e3fa7553
      size: 749404
  evaluate:
    cmd: uv run src/evaluate.py
    deps:
    - path: data/processed/val.csv
      hash: md5
      md5: 9c4ec0d759f4bd7989223db07a15d4f3
      size: 15378
    - path: models/random_forest/random_forest.pkl
      hash: md5
      md5: 778e7877c6a63591f7c8dc68e3fa7553
      size: 749404
    - path: src/evaluate.py
      hash: md5
      md5: 5636d7507e8065a5ab56b536eb22379e
      size: 2908
    params:
      params.yaml:
        dataset:
          target_col: Survived
          id_col: PassengerId
          test_size: 0.2
        hyperparameters:
          random_forest:
            n_estimators: 100
            max_depth: 10
            min_samples_split: 2
            min_samples_leaf: 1
            random_state: 42
        names:
          train_data: train.csv
          test_data: test.csv
          val_data: val.csv
          model_name: random_forest
          submission_name: submission.csv
          columns_transformer: columns_transformer
        paths:
          data_parent_dir: data
          models_parent_dir: models
          reports_parent_dir: reports
          figures_parent_dir: figures
          data:
            raw_data: data/raw
            interim_data: data/interim
            processed_data: data/processed
            external_data: data/external
        pipeline_config:
          drop:
          - PassengerId
          - Name
          - Ticket
          - Cabin
          imputation:
            mean:
            - Age
          scaling:
            standard:
            - Age
            - Fare
            minmax:
            - FamilySize
            - TicketGroupSize
          encoding:
            onehot:
            - Sex
            ordinal:
            - Embarked
            - Deck
            - Title
        tuning:
          n_iter: 10
          cv: 5
          random_forest:
            n_estimators:
            - 50
            - 100
            - 200
            max_depth:
            - 5
            - 10
            - 15
            min_samples_split:
            - 2
            - 5
            min_samples_leaf:
            - 1
            - 2
            max_features:
            - sqrt
            - log2
    outs:
    - path: reports/random_forest/evaluation_report.json
      hash: md5
      md5: 33429206b588d562b00b466c7228687b
      size: 408
